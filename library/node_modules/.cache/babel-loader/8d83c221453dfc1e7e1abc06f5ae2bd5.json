{"ast":null,"code":"import { ADD_BOOK, REMOVE_BOOK, SELECT_BOOK, SET_BOOKS, SET_CATEGORY, SET_ERROR, TOGGLE_ADDING, TOGGLE_EDITING, UPDATE_BOOK, USER_LOGIN, USER_LOGOUT, TOGGLE_REGISTERING, NEXT_PAGE, PREV_PAGE, SET_PER_PAGE, SET_SEARCH } from './constants';\nimport * as storage from '../utils/storage';\nexport const initialAuthState = {\n  user: storage.getUser(),\n  error: false,\n  registering: false\n};\nexport const initialBooksState = {\n  books: [],\n  booksCount: 0,\n  selected: false,\n  error: false,\n  adding: false,\n  editing: false,\n  category: 'All',\n  page: 1,\n  perPage: 10,\n  maxPage: 1,\n  search: ''\n};\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case USER_LOGIN:\n      return { ...state,\n        user: action.payload,\n        error: false\n      };\n\n    case USER_LOGOUT:\n      return { ...state,\n        user: false,\n        error: false\n      };\n\n    case TOGGLE_REGISTERING:\n      return { ...state,\n        registering: action.payload\n      };\n\n    case SET_ERROR:\n      return { ...state,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\nexport const booksReducer = (state, action) => {\n  switch (action.type) {\n    case SET_BOOKS:\n      return { ...state,\n        books: action.payload.results,\n        booksCount: action.payload.length,\n        error: false,\n        maxPage: Math.ceil(action.payload.length / state.perPage)\n      };\n\n    case ADD_BOOK:\n      return { ...state,\n        books: state.books.concat([action.payload]),\n        booksCount: state.booksCount + 1,\n        error: false\n      };\n\n    case REMOVE_BOOK:\n      return { ...state,\n        books: state.books.filter(b => b.id !== action.payload),\n        booksCount: state.booksCount - 1,\n        error: false\n      };\n\n    case UPDATE_BOOK:\n      return { ...state,\n        books: state.books.map(b => b.id === action.payload.id ? action.payload : b),\n        selected: action.payload,\n        error: false\n      };\n\n    case SELECT_BOOK:\n      const book = action.payload === false ? false : state.books.filter(b => b.id === action.payload)[0];\n      return { ...state,\n        selected: book,\n        editing: false,\n        error: false,\n        search: book === false ? state.category !== 'All' ? state.category : '' : book.authors[0],\n        perPage: book === false ? 10 : 4,\n        page: 1\n      };\n\n    case SET_ERROR:\n      return { ...state,\n        error: action.payload\n      };\n\n    case TOGGLE_ADDING:\n      return { ...state,\n        adding: action.payload,\n        selected: false,\n        perPage: 10,\n        search: state.category !== 'All' ? state.category : ''\n      };\n\n    case TOGGLE_EDITING:\n      return { ...state,\n        editing: action.payload\n      };\n\n    case SET_CATEGORY:\n      return { ...state,\n        category: action.payload,\n        page: 1,\n        search: action.payload === 'All' ? '' : action.payload\n      };\n\n    case NEXT_PAGE:\n      return { ...state,\n        page: state.page + 1\n      };\n\n    case PREV_PAGE:\n      return { ...state,\n        page: state.page - 1\n      };\n\n    case SET_PER_PAGE:\n      return { ...state,\n        perPage: action.payload,\n        page: 1\n      };\n\n    case SET_SEARCH:\n      return { ...state,\n        search: action.payload,\n        page: 1\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/home/duska/Downloads/zadatak4-main/library/src/context/reducer.js"],"names":["ADD_BOOK","REMOVE_BOOK","SELECT_BOOK","SET_BOOKS","SET_CATEGORY","SET_ERROR","TOGGLE_ADDING","TOGGLE_EDITING","UPDATE_BOOK","USER_LOGIN","USER_LOGOUT","TOGGLE_REGISTERING","NEXT_PAGE","PREV_PAGE","SET_PER_PAGE","SET_SEARCH","storage","initialAuthState","user","getUser","error","registering","initialBooksState","books","booksCount","selected","adding","editing","category","page","perPage","maxPage","search","authReducer","state","action","type","payload","booksReducer","results","length","Math","ceil","concat","filter","b","id","map","book","authors"],"mappings":"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","sourcesContent":["import {\n  ADD_BOOK,\n  REMOVE_BOOK,\n  SELECT_BOOK,\n  SET_BOOKS,\n  SET_CATEGORY,\n  SET_ERROR,\n  TOGGLE_ADDING,\n  TOGGLE_EDITING,\n  UPDATE_BOOK,\n  USER_LOGIN,\n  USER_LOGOUT,\n  TOGGLE_REGISTERING,\n  NEXT_PAGE,\n  PREV_PAGE,\n  SET_PER_PAGE,\n  SET_SEARCH,\n} from './constants'\nimport * as storage from '../utils/storage'\n\nexport const initialAuthState = {\n  user: storage.getUser(),\n  error: false,\n  registering: false\n}\n\nexport const initialBooksState = {\n  books: [],\n  booksCount: 0,\n  selected: false,\n  error: false,\n  adding: false,\n  editing: false,\n  category: 'All',\n  page: 1,\n  perPage: 10,\n  maxPage: 1,\n  search: ''\n}\n\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case USER_LOGIN:\n      return {\n        ...state,\n        user: action.payload,\n        error: false\n      }\n    case USER_LOGOUT:\n      return {\n        ...state,\n        user: false,\n        error: false\n      }\n    case TOGGLE_REGISTERING:\n      return {\n        ...state,\n        registering: action.payload\n      }\n    case SET_ERROR:\n      return {\n        ...state,\n        error: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport const booksReducer = (state, action) => {\n  switch (action.type) {\n    case SET_BOOKS:\n      return {\n        ...state,\n        books: action.payload.results,\n        booksCount: action.payload.length,\n        error: false,\n        maxPage: Math.ceil(action.payload.length / state.perPage)\n      }\n    case ADD_BOOK:\n      return {\n        ...state,\n        books: state.books.concat([action.payload]),\n        booksCount: state.booksCount + 1,\n        error: false\n      }\n    case REMOVE_BOOK:\n      return {\n        ...state,\n        books: state.books.filter(b => b.id !== action.payload),\n        booksCount: state.booksCount - 1,\n        error: false\n      }\n    case UPDATE_BOOK:\n      return {\n        ...state,\n        books: state.books.map(b => b.id === action.payload.id ? action.payload : b),\n        selected: action.payload,\n        error: false\n      }\n    case SELECT_BOOK:\n      const book = action.payload === false ? false :\n        state.books.filter(b => b.id === action.payload)[0]\n      return {\n        ...state,\n        selected: book,\n        editing: false,\n        error: false,\n        search: book === false ? state.category !== 'All' ? state.category : '' : book.authors[0],\n        perPage: book === false ? 10: 4,\n        page: 1,\n      }\n    case SET_ERROR:\n      return {\n        ...state,\n        error: action.payload\n      }\n    case TOGGLE_ADDING:\n      return {\n        ...state,\n        adding: action.payload,\n        selected: false,\n        perPage: 10,\n        search: state.category !== 'All' ? state.category : ''\n      }\n    case TOGGLE_EDITING:\n      return {\n        ...state,\n        editing: action.payload\n      }\n    case SET_CATEGORY:\n      return {\n        ...state,\n        category: action.payload,\n        page: 1,\n        search: action.payload === 'All' ? '' : action.payload\n      }\n    case NEXT_PAGE:\n      return {\n        ...state,\n        page: state.page + 1\n      }\n    case PREV_PAGE:\n      return {\n        ...state,\n        page: state.page - 1\n      }\n    case SET_PER_PAGE:\n      return {\n        ...state,\n        perPage: action.payload,\n        page: 1\n      }\n    case SET_SEARCH:\n      return {\n        ...state,\n        search: action.payload,\n        page: 1\n      }\n    default:\n      return state\n  }\n}\n"]},"metadata":{},"sourceType":"module"}